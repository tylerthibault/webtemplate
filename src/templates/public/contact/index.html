{% extends 'bases/public.html' %}

{% block styles %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrapcss/bootstrap.min.css') }}">
{% endblock styles %}

{% block content %}
<div class="container mt-5">
    <div class="row">
        <div class="col-lg-8 offset-lg-2">
            <h1 class="text-center mb-4">Contact Us</h1>
            <p class="lead text-center mb-5">
                Have questions or need help? We'd love to hear from you.
            </p>
            
            <!-- Contact Form -->
            <div class="card mb-5">
                <div class="card-header">
                    <h2 class="h4 mb-0">Send us a Message</h2>
                </div>
                <div class="card-body">
                    <form method="POST" action="{{ url_for('main.contact') }}">
                        <!-- CSRF Token -->
                        <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="name" class="form-label">Full Name <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="name" name="name" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="email" class="form-label">Email Address <span class="text-danger">*</span></label>
                                <input type="email" class="form-control" id="email" name="email" required>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="subject" class="form-label">Subject <span class="text-danger">*</span></label>
                            <select class="form-select" id="subject" name="subject" required>
                                <option value="">Please select a subject</option>
                                <option value="general">General Inquiry</option>
                                <option value="support">Technical Support</option>
                                <option value="feedback">Feedback</option>
                                <option value="business">Business Inquiry</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        
                        <div class="mb-3">
                            <label for="message" class="form-label">Message <span class="text-danger">*</span></label>
                            <textarea class="form-control" id="message" name="message" rows="5" placeholder="Please describe your inquiry or message..." required></textarea>
                        </div>
                        
                        <div class="d-grid">
                            <button type="submit" class="btn btn-primary btn-lg">
                                Send Message
                            </button>
                        </div>
                    </form>
                </div>
            </div>
            
            <!-- Contact Information -->
            <div class="row g-4">
                <div class="col-md-4">
                    <div class="card h-100 text-center">
                        <div class="card-body">
                            <div class="mb-3">
                                <div class="bg-primary text-white rounded-circle d-inline-flex align-items-center justify-content-center" style="width: 60px; height: 60px;">
                                    üìß
                                </div>
                            </div>
                            <h3 class="h5">Email Us</h3>
                            <p class="text-muted mb-0">
                                <a href="mailto:contact@example.com" class="text-decoration-none">
                                    contact@example.com
                                </a>
                            </p>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-4">
                    <div class="card h-100 text-center">
                        <div class="card-body">
                            <div class="mb-3">
                                <div class="bg-primary text-white rounded-circle d-inline-flex align-items-center justify-content-center" style="width: 60px; height: 60px;">
                                    üí¨
                                </div>
                            </div>
                            <h3 class="h5">Live Chat</h3>
                            <p class="text-muted mb-0">
                                Available Monday - Friday<br>
                                9:00 AM - 5:00 PM EST
                            </p>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-4">
                    <div class="card h-100 text-center">
                        <div class="card-body">
                            <div class="mb-3">
                                <div class="bg-primary text-white rounded-circle d-inline-flex align-items-center justify-content-center" style="width: 60px; height: 60px;">
                                    ‚ùì
                                </div>
                            </div>
                            <h3 class="h5">FAQ</h3>
                            <p class="text-muted mb-0">
                                <a href="{{ url_for('main.faq') }}" class="text-decoration-none">
                                    Check our frequently asked questions
                                </a>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Additional Information -->
            <div class="card mt-5">
                <div class="card-body">
                    <h2 class="h4 mb-3">Get in Touch</h2>
                    <div class="row">
                        <div class="col-md-6">
                            <p>
                                We're here to help and answer any questions you might have. We look forward to hearing from you!
                            </p>
                            
                            <h3 class="h6 mb-2">Response Time</h3>
                            <ul class="list-unstyled">
                                <li>‚Ä¢ General inquiries: Within 24 hours</li>
                                <li>‚Ä¢ Technical support: Within 12 hours</li>
                                <li>‚Ä¢ Business inquiries: Within 48 hours</li>
                            </ul>
                        </div>
                        
                        <div class="col-md-6">
                            <h3 class="h6 mb-2">What to Include</h3>
                            <p class="small text-muted">
                                To help us assist you better, please include:
                            </p>
                            <ul class="list-unstyled small text-muted">
                                <li>‚Ä¢ A clear description of your question or issue</li>
                                <li>‚Ä¢ Any relevant technical details</li>
                                <li>‚Ä¢ Your preferred contact method</li>
                                <li>‚Ä¢ The best time to reach you</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock content %}

{% block scripts %}
    <script src="{{ url_for('static', filename='js/bootstrapjs/bootstrap.bundle.min.js') }}"></script>
    
    <script>
        // Form validation and submission handling
        document.querySelector('form').addEventListener('submit', function(e) {
            const requiredFields = ['name', 'email', 'subject', 'message'];
            let isValid = true;
            
            requiredFields.forEach(field => {
                const input = document.getElementById(field);
                const value = input.value.trim();
                
                if (!value) {
                    input.classList.add('is-invalid');
                    isValid = false;
                } else {
                    input.classList.remove('is-invalid');
                    input.classList.add('is-valid');
                }
            });
            
            // Email validation
            const email = document.getElementById('email');
            const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (email.value && !emailPattern.test(email.value)) {
                email.classList.add('is-invalid');
                isValid = false;
            }
            
            if (!isValid) {
                e.preventDefault();
                alert('Please fill in all required fields correctly.');
            }
        });
        
        // Remove validation classes on input
        document.querySelectorAll('input, select, textarea').forEach(field => {
            field.addEventListener('input', function() {
                this.classList.remove('is-invalid', 'is-valid');
            });
        });
    </script>
{% endblock scripts %}
